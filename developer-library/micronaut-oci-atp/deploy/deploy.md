# Deployment

## Introduction

This lab takes you through deploying the Micronaut application to an OCI VM.

Estimated Lab Time: 10 minutes

### Objectives

In this lab you will:

* Build your application distribution
* Upload the application distribution and wallet to an OCI VM
* Run your application on the OCI VM

## **STEP**:  Deploy Micronaut Application to OCI

### Deploy (From Local To VM)

1. Before deploying, ensure the wallet exists on the VM by running the snippet produced by `setup.sh` that looks similar to:

    ```bash
    # run on local machine to push to VM
    <copy>
    scp -i ~/.ssh/id_oci -r /tmp/wallet opc@[VM IP Address]:/tmp/wallet
    </copy>
    ```

2. Build JAR with:

    ```bash
    # run on local machine
    <copy>
    ./gradlew assemble
    </copy>
    ```

3. Push JAR to VM with the snippet produced by *setup.sh* that looks similar to this:

    ```bash
    # run on local machine to push to VM
    <copy>
    scp -i ~/.ssh/id_oci -r build/libs/example-atp-0.1-all.jar opc@[VM IP Address]:/app/application.jar
    </copy>
    ```

4. Push Helidon native image to the VM:

    ```bash
    # run on local machine to push to VM, from the directory that contains downloaded native image
    <copy>
    scp -i ~/.ssh/id_oci ./helidon-mp-service opc@[VM IP Address]:/app/helidon-mp-service
    </copy>
    ```

5. Run the Helidon application on the VM:

    ```bash
    # run on VM to start Helidon application
    <copy>
    ./app/helidon-mp-service
    </copy>
    ```

4. To run on the VM, SSH in and run the snippet generated by `setup.sh` that looks similar to this:

    ```
    <copy>
    # run on VM to start Micronaut application
    export MICRONAUT_OCI_DEMO_PASSWORD=[Your atp_wallet_password]
    export TNS_ADMIN=/tmp/wallet
    java -jar /app/application.jar
    </copy>
    ```

You may now *proceed to the next lab*.

## Acknowledgements
- **Owners** - Graeme Rocher, Architect, Oracle Labs - Databases and Optimization
- **Contributors** - Chris Bensen, Todd Sharp, Eric Sedlar
- **Last Updated By** - Kay Malcolm, DB Product Management, August 2020

## See an issue?
Please submit feedback using this [form](https://apexapps.oracle.com/pls/apex/f?p=133:1:::::P1_FEEDBACK:1). Please include the *workshop name*, *lab* and *step* in your request.  If you don't see the workshop name listed, please enter it manually. If you would like for us to follow up with you, enter your email in the *Feedback Comments* section.